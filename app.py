import streamlit as st
import time

st.set_page_config(page_title="–•–∏–º–∏—è: –û—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ “õ–æ—Å—ã–ª—ã—Å—Ç–∞—Ä —Å–∏–º—É–ª—è—Ç–æ—Ä—ã", layout="wide")

# ---------------- SIDEBAR ----------------
st.sidebar.title("üß™ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è")
lessons = {
    "1-—Å–∞–±–∞“õ: “ö–∞–Ω—ã“õ–ø–∞“ì–∞–Ω –∫”©–º—ñ—Ä—Å—É—Ç–µ–∫—Ç–µ—Ä": 1,
    "2-—Å–∞–±–∞“õ: –ö”©–ø –∞—Ç–æ–º–¥—ã —Å–ø–∏—Ä—Ç—Ç–µ—Ä": 2,
    "3-—Å–∞–±–∞“õ: –ê–ª—å–¥–µ–≥–∏–¥—Ç–µ—Ä–¥—ñ –∞–Ω—ã“õ—Ç–∞—É": 3,
    "4-—Å–∞–±–∞“õ: –ö–∞—Ä–±–æ–Ω “õ—ã—à“õ—ã–ª–¥–∞—Ä—ã": 4,
    "5-—Å–∞–±–∞“õ: –ê“õ—É—ã–∑–¥–∞—Ä–¥—ã“£ —Ç“Ø—Å—Ç—ñ —Ä–µ–∞–∫—Ü–∏—è–ª–∞—Ä—ã": 5
}
lesson_selected = st.sidebar.selectbox("–¢–∞“õ—ã—Ä—ã–ø—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑:", list(lessons.keys()))
lesson_id = lessons[lesson_selected]

st.sidebar.markdown("---")
st.sidebar.info("–ë“±–ª —Å–∏–º—É–ª—è—Ç–æ—Ä 10-—Å—ã–Ω—ã–ø –æ—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ —Ö–∏–º–∏—è –∫—É—Ä—Å—ã–Ω–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω.")

# ---------------- DATA ----------------
lesson_content = {
    1: {
        "topic": "–ê–ª–∫–µ–Ω–¥–µ—Ä –º–µ–Ω –∞–ª–∫–∏–Ω–¥–µ—Ä–¥—ñ“£ —Å–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ü–∏—è–ª–∞—Ä—ã",
        "theory": "“ö–∞–Ω—ã“õ–ø–∞“ì–∞–Ω –∫”©–º—ñ—Ä—Å—É—Ç–µ–∫—Ç–µ—Ä–¥–µ –µ—Å–µ–ª—ñ –±–∞–π–ª–∞–Ω—ã—Å—Ç–∞—Ä (“õ–æ—Å –Ω–µ–º–µ—Å–µ “Ø—à) –±–æ–ª–∞–¥—ã. –û–ª–∞—Ä–¥—ã –∞–Ω—ã“õ—Ç–∞—É “Ø—à—ñ–Ω –±—Ä–æ–º —Å—É—ã –Ω–µ–º–µ—Å–µ –∫–∞–ª–∏–π –ø–µ—Ä–º–∞–Ω–≥–∞–Ω–∞—Ç—ã “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã.",
        "lab": ("–ë—Ä–æ–º —Å—É—ã ($Br_2$)", "“ö–æ“£—ã—Ä-—Å–∞—Ä—ã —Ç“Ø—Å—Ç—ñ“£ —Ç“Ø—Å—Å—ñ–∑–¥–µ–Ω—É—ñ", "–ï—Å–µ–ª—ñ –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã“£ (C=C –Ω–µ–º–µ—Å–µ C‚â°C) –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω –¥”ô–ª–µ–ª–¥–µ–π–¥—ñ"),
        "color": "#E67E22", # –ë—Ä–æ–º —Ç“Ø—Å—ñ
        "test": [
            ("–≠—Ç–∏–ª–µ–Ω–¥—ñ –±—Ä–æ–º —Å—É—ã –∞—Ä“õ—ã–ª—ã ”©—Ç–∫—ñ–∑–≥–µ–Ω–¥–µ –Ω–µ –±–∞–π“õ–∞–ª–∞–¥—ã?", ["–ö”©–∫ —Ç“Ø—Å", "–¢“Ø—Å—Å—ñ–∑–¥–µ–Ω—É", "“ö—ã–∑—ã–ª —Ç“±–Ω–±–∞"], 1),
            ("“ö–∞–Ω—ã“õ–ø–∞“ì–∞–Ω–¥—ã“õ“õ–∞ —Ç”ô–Ω —Ä–µ–∞–∫—Ç–∏–≤—Ç—ñ –∞—Ç–∞“£—ã–∑:", ["NaOH", "KMnO‚ÇÑ", "NaCl"], 1),
            ("–ê—Ü–µ—Ç–∏–ª–µ–Ω –±—Ä–æ–º–º–µ–Ω ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Å–∫–µ–Ω–¥–µ —Ç“Ø–∑—ñ–ª–µ—Ç—ñ–Ω ”©–Ω—ñ–º?", ["1,2-–¥–∏–±—Ä–æ–º—ç—Ç–∞–Ω", "–ë—Ä–æ–º–º–µ—Ç–∞–Ω", "1,1,2,2-—Ç–µ—Ç—Ä–∞–±—Ä–æ–º—ç—Ç–∞–Ω"], 2)
        ]
    },
    2: {
        "topic": "–ö”©–ø –∞—Ç–æ–º–¥—ã —Å–ø–∏—Ä—Ç—Ç–µ—Ä (–ì–ª–∏—Ü–µ—Ä–∏–Ω)",
        "theory": "–ö”©–ø –∞—Ç–æ–º–¥—ã —Å–ø–∏—Ä—Ç—Ç–µ—Ä–¥—ñ –∞–Ω—ã“õ—Ç–∞—É “Ø—à—ñ–Ω –∂–∞“£–∞ –¥–∞–π—ã–Ω–¥–∞–ª“ì–∞–Ω –º—ã—Å (II) –≥–∏–¥—Ä–æ–∫—Å–∏–¥—ñ “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã. –ù”ô—Ç–∏–∂–µ—Å—ñ–Ω–¥–µ –∞—à—ã“õ –∫”©–∫ —Ç“Ø—Å—Ç—ñ –∫–µ—à–µ–Ω–¥—ñ “õ–æ—Å—ã–ª—ã—Å —Ç“Ø–∑—ñ–ª–µ–¥—ñ.",
        "lab": ("$Cu(OH)_2$ (–∂–∞“£–∞ –¥–∞–π—ã–Ω–¥–∞–ª“ì–∞–Ω)", "–¢“±–Ω–±–∞ –µ—Ä—ñ–ø, –∞—à—ã“õ –∫”©–∫ (—á–µ–ª—Å–∏) —Ç“Ø—Å—Ç—ñ –µ—Ä—ñ—Ç—ñ–Ω–¥—ñ —Ç“Ø–∑—ñ–ª–µ–¥—ñ", "–ö”©—Ä—à—ñ–ª–µ—Å –∫”©–º—ñ—Ä—Ç–µ–∫ –∞—Ç–æ–º–¥–∞—Ä—ã–Ω–¥–∞ -OH —Ç–æ–ø—Ç–∞—Ä—ã –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω –¥”ô–ª–µ–ª–¥–µ–π–¥—ñ"),
        "color": "#0000FF", # –ê—à—ã“õ –∫”©–∫
        "test": [
            ("–ì–ª–∏—Ü–µ—Ä–∏–Ω–≥–µ —Å–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ç–∏–≤ “õ–∞–Ω–¥–∞–π?", ["Cu(OH)‚ÇÇ", "AgNO‚ÇÉ", "FeCl‚ÇÉ"], 0),
            ("–†–µ–∞–∫—Ü–∏—è –Ω”ô—Ç–∏–∂–µ—Å—ñ–Ω–¥–µ “õ–∞–Ω–¥–∞–π —Ç“Ø—Å –ø–∞–π–¥–∞ –±–æ–ª–∞–¥—ã?", ["“ö—ã–∑—ã–ª", "–ê—à—ã“õ –∫”©–∫", "–°–∞—Ä—ã"], 1),
            ("–°–ø–∏—Ä—Ç—Ç–µ—Ä–¥—ñ“£ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–±—ã:", ["-COOH", "-CHO", "-OH"], 2)
        ]
    },
    3: {
        "topic": "–ê–ª—å–¥–µ–≥–∏–¥—Ç–µ—Ä (–ö“Ø–º—ñ—Å –∞–π–Ω–∞ —Ä–µ–∞–∫—Ü–∏—è—Å—ã)",
        "theory": "–ê–ª—å–¥–µ–≥–∏–¥—Ç–µ—Ä —Ç–æ—Ç—ã“õ—Ç—ã—Ä“ì—ã—à—Ç–∞—Ä–º–µ–Ω ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Å–∫–µ–Ω–¥–µ –∫–∞—Ä–±–æ–Ω “õ—ã—à“õ—ã–ª–¥–∞—Ä—ã–Ω–∞ –¥–µ–π—ñ–Ω —Ç–æ—Ç—ã“ì–∞–¥—ã. –ê–º–º–∏–∞–∫—Ç–∞“ì—ã –∫“Ø–º—ñ—Å –æ–∫—Å–∏–¥—ñ –µ—Ä—ñ—Ç—ñ–Ω–¥—ñ—Å—ñ–º–µ–Ω –ø—Ä–æ–±–∏—Ä–∫–∞ “õ–∞–±—ã—Ä“ì–∞—Å—ã–Ω–¥–∞ —Ç–∞–∑–∞ –∫“Ø–º—ñ—Å “õ–æ–Ω–∞–¥—ã.",
        "lab": ("$AgNO_3 + NH_3$ (–∞–º–º–∏–∞–∫—Ç–∞“ì—ã –∫“Ø–º—ñ—Å –æ–∫—Å–∏–¥—ñ)", "–ü—Ä–æ–±–∏—Ä–∫–∞ “õ–∞–±—ã—Ä“ì–∞—Å—ã–Ω–¥–∞ –∂—ã–ª—Ç—ã—Ä –∫“Ø–º—ñ—Å “õ–∞–±–∞—Ç—ã–Ω—ã“£ —Ç“Ø–∑—ñ–ª—É—ñ", "–ê–ª—å–¥–µ–≥–∏–¥ —Ç–æ–±—ã–Ω—ã“£ (-CHO) –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω –∫”©—Ä—Å–µ—Ç–µ–¥—ñ"),
        "color": "#C0C0C0", # –ö“Ø–º—ñ—Å —Ç“Ø—Å
        "test": [
            ("–ö“Ø–º—ñ—Å –∞–π–Ω–∞ —Ä–µ–∞–∫—Ü–∏—è—Å—ã “õ–∞–π –∑–∞—Ç“õ–∞ —Ç”ô–Ω?", ["–ì–ª—é–∫–æ–∑–∞", "–≠—Ç–∞–Ω", "–ë–µ–Ω–∑–æ–ª"], 0),
            ("–ê–ª—å–¥–µ–≥–∏–¥—Ç–µ—Ä —Ç–æ—Ç—ã“õ“õ–∞–Ω–¥–∞ –Ω–µ —Ç“Ø–∑—ñ–ª–µ–¥—ñ?", ["–°–ø–∏—Ä—Ç", "–ö–∞—Ä–±–æ–Ω “õ—ã—à“õ—ã–ª—ã", "–ê–ª–∫–∞–Ω"], 1),
            ("–ù–µ–ª—ñ–∫—Ç–µ–Ω —Ä–µ–∞–∫—Ü–∏—è '–ö“Ø–º—ñ—Å –∞–π–Ω–∞' –¥–µ–ø –∞—Ç–∞–ª–∞–¥—ã?", ["–ê–π–Ω–∞ –∂–∞—Å–∞—É–¥–∞ “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã", "–ö“Ø–º—ñ—Å –±”©–ª—ñ–Ω—ñ–ø, –∞–π–Ω–∞ —Å–∏—è“õ—Ç—ã –∂—ã–ª—Ç—ã—Ä–∞–π–¥—ã", "–ö“Ø–º—ñ—Å –µ—Ä—ñ–ø –∫–µ—Ç–µ–¥—ñ"], 1)
        ]
    },
    4: {
        "topic": "–ö–∞—Ä–±–æ–Ω “õ—ã—à“õ—ã–ª–¥–∞—Ä—ã",
        "theory": "–°—ñ—Ä–∫–µ “õ—ã—à“õ—ã–ª—ã —Å–∏—è“õ—Ç—ã “õ—ã—à“õ—ã–ª–¥–∞—Ä –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç“Ø—Å—ñ–Ω ”©–∑–≥–µ—Ä—Ç–µ–¥—ñ –∂”ô–Ω–µ –±–µ–ª—Å–µ–Ω–¥—ñ –º–µ—Ç–∞–ª–¥–∞—Ä–º–µ–Ω, –∫–∞—Ä–±–æ–Ω–∞—Ç—Ç–∞—Ä–º–µ–Ω ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Å–µ–¥—ñ.",
        "lab": ("$Na_2CO_3$ (—Å–æ–¥–∞ –µ—Ä—ñ—Ç—ñ–Ω–¥—ñ—Å—ñ)", "–®–∏“õ—ã–ª–¥–∞“ì–∞–Ω –¥—ã–±—ã—Å–ø–µ–Ω –≥–∞–∑ (CO2) –±”©–ª—ñ–Ω—É—ñ", "“ö—ã—à“õ—ã–ª–¥—ã“õ –æ—Ä—Ç–∞ –º–µ–Ω –∫–∞—Ä–±–æ–∫—Å–∏–ª —Ç–æ–±—ã–Ω—ã“£ (-COOH) –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω –¥”ô–ª–µ–ª–¥–µ–π–¥—ñ"),
        "color": "#FF4B4B", # “ö—ã—à“õ—ã–ª–¥—ã“õ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç“Ø—Å—ñ
        "test": [
            ("–°—ñ—Ä–∫–µ “õ—ã—à“õ—ã–ª—ã–Ω–∞ –ª–∞–∫–º—É—Å “õ–æ—Å“õ–∞–Ω–¥–∞ —Ç“Ø—Å—ñ “õ–∞–Ω–¥–∞–π –±–æ–ª–∞–¥—ã?", ["–ö”©–∫", "“ö—ã–∑—ã–ª", "–ö“Ø–ª–≥—ñ–Ω"], 1),
            ("“ö—ã—à“õ—ã–ª –º–µ–Ω —Å–æ–¥–∞ ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Å–∫–µ–Ω–¥–µ –±”©–ª—ñ–Ω–µ—Ç—ñ–Ω –≥–∞–∑:", ["O‚ÇÇ", "H‚ÇÇ", "CO‚ÇÇ"], 2),
            ("“ö“±–º—ã—Ä—Å“õ–∞ “õ—ã—à“õ—ã–ª—ã–Ω—ã“£ —Ñ–æ—Ä–º—É–ª–∞—Å—ã:", ["CH‚ÇÉCOOH", "HCOOH", "C‚ÇÇH‚ÇÖCOOH"], 1)
        ]
    },
    5: {
        "topic": "–ê“õ—É—ã–∑–¥–∞—Ä–¥—ã“£ —Å–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ü–∏—è–ª–∞—Ä—ã",
        "theory": "–ê“õ—É—ã–∑–¥–∞—Ä–¥—ã –∞–Ω—ã“õ—Ç–∞—É–¥—ã“£ –µ–∫—ñ –Ω–µ–≥—ñ–∑–≥—ñ –∂–æ–ª—ã –±–∞—Ä: –ë–∏—É—Ä–µ—Ç (–ø–µ–ø—Ç–∏–¥—Ç—ñ–∫ –±–∞–π–ª–∞–Ω—ã—Å) –∂”ô–Ω–µ –ö—Å–∞–Ω—Ç–æ–ø—Ä–æ—Ç–µ–∏–Ω (–±–µ–Ω–∑–æ–ª —Å–∞“õ–∏–Ω–∞—Å—ã) —Ä–µ–∞–∫—Ü–∏—è–ª–∞—Ä—ã.",
        "lab": ("–ë–∏—É—Ä–µ—Ç —Ä–µ–∞–∫—Ü–∏—è—Å—ã ($CuSO_4 + NaOH$)", "–ï—Ä—ñ—Ç—ñ–Ω–¥—ñ –∞—à—ã“õ –∫“Ø–ª–≥—ñ–Ω —Ç“Ø—Å–∫–µ –±–æ—è–ª–∞–¥—ã", "–ê“õ—É—ã–∑ –º–æ–ª–µ–∫—É–ª–∞—Å—ã–Ω–¥–∞ –ø–µ–ø—Ç–∏–¥—Ç—ñ–∫ –±–∞–π–ª–∞–Ω—ã—Å—Ç–∞—Ä–¥—ã“£ –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω –¥”ô–ª–µ–ª–¥–µ–π–¥—ñ"),
        "color": "#8A2BE2", # –ö“Ø–ª–≥—ñ–Ω
        "test": [
            ("–ê“õ—É—ã–∑“ì–∞ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–ª—ñ –∞–∑–æ—Ç “õ—ã—à“õ—ã–ª—ã–Ω “õ–æ—Å“õ–∞–Ω–¥–∞ –ø–∞–π–¥–∞ –±–æ–ª–∞—Ç—ã–Ω —Å–∞—Ä—ã —Ç“Ø—Å:", ["–ë–∏—É—Ä–µ—Ç", "–ö—Å–∞–Ω—Ç–æ–ø—Ä–æ—Ç–µ–∏–Ω", "–ù–∏–Ω–≥–∏–¥—Ä–∏–Ω"], 1),
            ("–ë–∏—É—Ä–µ—Ç —Ä–µ–∞–∫—Ü–∏—è—Å—ã “õ–∞–π –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã –∞–Ω—ã“õ—Ç–∞–π–¥—ã?", ["–°—É—Ç–µ–∫—Ç—ñ–∫", "–ü–µ–ø—Ç–∏–¥—Ç—ñ–∫", "–ò–æ–Ω–¥—ã“õ"], 1),
            ("–ê“õ—É—ã–∑–¥—ã“£ –¥–µ–Ω–∞—Ç—É—Ä–∞—Ü–∏—è—Å—ã –¥–µ–≥–µ–Ω –Ω–µ?", ["“ö“±—Ä—ã–ª—ã–º—ã–Ω—ã“£ –±“±–∑—ã–ª—É—ã", "–¢“Ø—Å—ñ–Ω—ñ“£ ”©–∑–≥–µ—Ä—É—ñ", "–ñ–∞“£–∞ –∞“õ—É—ã–∑ —Ç“Ø–∑—ñ–ª—É—ñ"], 0)
        ]
    }
}

# ---------------- UI LOGIC ----------------
data = lesson_content[lesson_id]

st.header(f"üìñ {data['topic']}")

col1, col2 = st.columns([1, 1])

with col1:
    st.subheader("üìö –¢–µ–æ—Ä–∏—è–ª—ã“õ –º”ô–ª—ñ–º–µ—Ç")
    st.write(data["theory"])
    
    st.subheader("üß™ –¢”ô–∂—ñ—Ä–∏–±–µ –±–∞—Ä—ã—Å—ã")
    st.markdown(f"**–†–µ–∞–∫—Ç–∏–≤:** {data['lab'][0]}")
    if st.button("–†–µ–∞–∫—Ü–∏—è–Ω—ã –±–∞—Å—Ç–∞—É"):
        st.write("‚åõ –†–µ–∞–∫—Ü–∏—è –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä...")
        progress_bar = st.progress(0)
        for i in range(101):
            time.sleep(0.01)
            progress_bar.progress(i)
        
        st.success(f"**–ë–∞“õ—ã–ª–∞—É:** {data['lab'][1]}")
        st.info(f"**“ö–æ—Ä—ã—Ç—ã–Ω–¥—ã:** {data['lab'][2]}")
        
        # –í–∏–∑—É–∞–ª–¥—ã –ø—Ä–æ–±–∏—Ä–∫–∞ (HTML/CSS)
        st.markdown(f"""
            <div style="width: 100px; height: 200px; border: 3px solid black; 
            border-radius: 0 0 50px 50px; background-color: #f0f0f0; position: relative;">
                <div style="width: 100%; height: 60%; background-color: {data['color']}; 
                position: absolute; bottom: 0; border-radius: 0 0 47px 47px; opacity: 0.8;"></div>
            </div>
            <p>–ü—Ä–æ–±–∏—Ä–∫–∞–¥–∞“ì—ã –∫”©—Ä—ñ–Ω—ñ—Å</p>
        """, unsafe_allow_html=True)

with col2:
    st.subheader("üìù –ë—ñ–ª—ñ–º–¥—ñ —Ç–µ–∫—Å–µ—Ä—É")
    score = 0
    for i, (q, options, correct) in enumerate(data["test"]):
        ans = st.radio(f"{i+1}. {q}", options, key=f"test_{lesson_id}_{i}")
        if options.index(ans) == correct:
            score += 1
    
    if st.button("–ù”ô—Ç–∏–∂–µ–Ω—ñ –µ—Å–µ–ø—Ç–µ—É"):
        if score == 3:
            st.balloons()
            st.success(f"–ö–µ—Ä–µ–º–µ—Ç! –ñ–∞—É–∞–±—ã“£—ã–∑: {score}/3")
        else:
            st.warning(f"–ñ–∞“õ—Å—ã, –±—ñ—Ä–∞“õ —ñ–∑–¥–µ–Ω—É –∫–µ—Ä–µ–∫. –ñ–∞—É–∞–±—ã“£—ã–∑: {score}/3")



# ---------------- FOOTER ----------------
st.markdown("---")
st.caption("10-—Å—ã–Ω—ã–ø –•–∏–º–∏—è –ø”ô–Ω—ñ–Ω–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∫”©–º–µ–∫—à—ñ “õ“±—Ä–∞–ª")
