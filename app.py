import streamlit as st
import time

st.set_page_config(page_title="Organic Chemistry 10-class", layout="wide")

# ---------------- DATA: –ë–ê–†–õ–´“ö 34 –°–ê–ë–ê“ö–¢–´“¢ –ú”ò–õ–Ü–ú–ï–¢–¢–ï–†–Ü ----------------
# –ú—ã—Å–∞–ª —Ä–µ—Ç—ñ–Ω–¥–µ –∞–ª“ì–∞—à“õ—ã —Å–∞–±–∞“õ—Ç–∞—Ä –º–µ–Ω –Ω–µ–≥—ñ–∑–≥—ñ–ª–µ—Ä—ñ–Ω —Ç–æ–ª—Ç—ã—Ä–¥—ã–º
lesson_data = {
    1: {
        "topic": "–û—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ —Ö–∏–º–∏—è“ì–∞ –∫—ñ—Ä—ñ—Å–ø–µ",
        "theory": "–û—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ —Ö–∏–º–∏—è - –∫”©–º—ñ—Ä—Ç–µ–∫ “õ–æ—Å—ã–ª—ã—Å—Ç–∞—Ä—ã–Ω –∑–µ—Ä—Ç—Ç–µ–π—Ç—ñ–Ω “ì—ã–ª—ã–º. –ö”©–º—ñ—Ä—Ç–µ–∫ –∞—Ç–æ–º—ã –æ—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ “õ–æ—Å—ã–ª—ã—Å—Ç–∞—Ä–¥–∞ ”ô—Ä“õ–∞—à–∞–Ω IV –≤–∞–ª–µ–Ω—Ç—Ç—ñ.",
        "lab": ("–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä “õ–∞“ì–∞–∑—ã", "–ë–µ–π—Ç–∞—Ä–∞–ø –æ—Ä—Ç–∞", "–ó–∞—Ç—Ç—ã“£ —Ç–∞–∑–∞–ª—ã“ì—ã–Ω —Ç–µ–∫—Å–µ—Ä—É"),
        "color": "#FFFFFF",
        "test": [
            ("–û—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ —Ö–∏–º–∏—è –Ω–µ–Ω—ñ –∑–µ—Ä—Ç—Ç–µ–π–¥—ñ?", ["–ú–µ—Ç–∞–ª–¥–∞—Ä–¥—ã", "–ö”©–º—ñ—Ä—Ç–µ–∫ “õ–æ—Å—ã–ª—ã—Å—Ç–∞—Ä—ã–Ω", "–ì–∞–∑–¥–∞—Ä–¥—ã"], 1),
            ("–ö”©–º—ñ—Ä—Ç–µ–∫—Ç—ñ“£ –≤–∞–ª–µ–Ω—Ç—Ç—ñ–ª—ñ–≥—ñ “õ–∞–Ω–¥–∞–π?", ["II", "IV", "VI"], 1),
            ("–û—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ –∑–∞—Ç—Ç–∞—Ä–¥—ã“£ –Ω–µ–≥—ñ–∑—ñ “õ–∞–π —ç–ª–µ–º–µ–Ω—Ç?", ["–û—Ç—Ç–µ–∫", "–ê–∑–æ—Ç", "–ö”©–º—ñ—Ä—Ç–µ–∫"], 2),
            ("–í–∏—Ç–∞–ª–∏–∑–º —ñ–ª—ñ–º—ñ –Ω–µ–Ω—ñ “õ–æ–ª–¥–∞–¥—ã?", ["–ñ–∞–Ω–¥—ã –∫“Ø—à—Ç—ñ", "–°–∏–Ω—Ç–µ–∑–¥—ñ", "–ê—Ç–æ–º–¥–∞—Ä–¥—ã"], 0),
            ("–ê–ª“ì–∞—à“õ—ã –æ—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ —Å–∏–Ω—Ç–µ–∑–¥—ñ –∫—ñ–º –∂–∞—Å–∞–¥—ã?", ["–§.–í–µ–ª–µ—Ä", "–î.–ú–µ–Ω–¥–µ–ª–µ–µ–≤", "–ê.–ë—É—Ç–ª–µ—Ä–æ–≤"], 0)
        ]
    },
    11: {
        "topic": "–ê–ª–∫–µ–Ω–¥–µ—Ä. –≠—Ç–∏–ª–µ–Ω",
        "theory": "–ê–ª–∫–µ–Ω–¥–µ—Ä - “õ“±—Ä–∞–º—ã–Ω–¥–∞ –±—ñ—Ä “õ–æ—Å –±–∞–π–ª–∞–Ω—ã—Å—ã ($C=C$) –±–∞—Ä “õ–∞–Ω—ã“õ–ø–∞“ì–∞–Ω –∫”©–º—ñ—Ä—Å—É—Ç–µ–∫—Ç–µ—Ä. –ñ–∞–ª–ø—ã —Ñ–æ—Ä–º—É–ª–∞—Å—ã: $C_nH_{2n}$.",
        "lab": ("–ë—Ä–æ–º —Å—É—ã ($Br_2$)", "“ö–æ“£—ã—Ä —Ç“Ø—Å—Å—ñ–∑–¥–µ–Ω–µ–¥—ñ", "“ö–æ—Å –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã –∞–Ω—ã“õ—Ç–∞—É"),
        "color": "#F4D03F",
        "test": [
            ("–ê–ª–∫–µ–Ω–¥–µ—Ä–¥—ñ“£ –∂–∞–ª–ø—ã —Ñ–æ—Ä–º—É–ª–∞—Å—ã?", ["CnH2n+2", "CnH2n", "CnH2n-2"], 1),
            ("–≠—Ç–∏–ª–µ–Ω–≥–µ —Ç”ô–Ω —Ä–µ–∞–∫—Ü–∏—è —Ç“Ø—Ä—ñ?", ["–û—Ä—ã–Ω–±–∞—Å—É", "“ö–æ—Å—ã–ª—É", "–ê–π—ã—Ä—ã–ª—É"], 1),
            ("“ö–æ—Å –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã –∞–Ω—ã“õ—Ç–∞–π—Ç—ã–Ω —Ä–µ–∞–∫—Ç–∏–≤?", ["–ë—Ä–æ–º —Å—É—ã", "–°—ñ–ª—Ç—ñ", "–¢“±–∑ “õ—ã—à“õ—ã–ª—ã"], 0),
            ("–≠—Ç–∏–ª–µ–Ω–Ω—ñ“£ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—è—Å—ã–Ω–∞–Ω –Ω–µ —Ç“Ø–∑—ñ–ª–µ–¥—ñ?", ["–ú–µ—Ç–∞–Ω", "–≠—Ç–∏–ª —Å–ø–∏—Ä—Ç—ñ", "–£–∫—Å—É—Å “õ—ã—à“õ—ã–ª—ã"], 1),
            ("–ê–ª–∫–µ–Ω–¥–µ—Ä–¥—ñ“£ –±—ñ—Ä—ñ–Ω—à—ñ ”©–∫—ñ–ª—ñ?", ["–ú–µ—Ç–∞–Ω", "–≠—Ç–∞–Ω", "–≠—Ç–µ–Ω (—ç—Ç–∏–ª–µ–Ω)"], 2)
        ]
    },
    22: {
        "topic": "–ë—ñ—Ä –∞—Ç–æ–º–¥—ã —à–µ–∫—Ç—ñ —Å–ø–∏—Ä—Ç—Ç–µ—Ä",
        "theory": "–°–ø–∏—Ä—Ç—Ç–µ—Ä - “õ“±—Ä–∞–º—ã–Ω–¥–∞ –≥–∏–¥—Ä–æ–∫—Å–∏–ª —Ç–æ–±—ã ($-OH$) –±–∞—Ä “õ–æ—Å—ã–ª—ã—Å—Ç–∞—Ä. –ú–µ—Ç–∞–Ω–æ–ª - ”©—Ç–µ —É–ª—ã –∑–∞—Ç.",
        "lab": ("CuO (–º—ã—Å –æ–∫—Å–∏–¥—ñ)", "“ö–∞—Ä–∞ —Ç“Ø—Å—Ç—ñ“£ “õ—ã–∑–∞—Ä—É—ã", "–°–ø–∏—Ä—Ç—Ç—ñ“£ –∞–ª—å–¥–µ–≥–∏–¥–∫–µ —Ç–æ—Ç—ã“ì—É—ã"),
        "color": "#E74C3C",
        "test": [
            ("–°–ø–∏—Ä—Ç—Ç–µ—Ä–¥—ñ“£ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–±—ã?", ["-CHO", "-OH", "-COOH"], 1),
            ("–ú–µ—Ç–∞–Ω–æ–ª–¥—ã“£ –µ–∫—ñ–Ω—à—ñ –∞—Ç—ã?", ["–ê“ì–∞—à —Å–ø–∏—Ä—Ç—ñ", "–®–∞—Ä–∞–ø —Å–ø–∏—Ä—Ç—ñ", "–ú“±–Ω–∞–π —Å–ø–∏—Ä—Ç—ñ"], 0),
            ("–°–ø–∏—Ä—Ç—Ç–µ—Ä –º–µ–Ω —Å—ñ–ª—Ç—ñ–ª—ñ–∫ –º–µ—Ç–∞–ª–¥–∞—Ä ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Å–∫–µ–Ω–¥–µ –Ω–µ –±”©–ª—ñ–Ω–µ–¥—ñ?", ["CO2", "H2", "O2"], 1),
            ("–≠—Ç–∏–ª —Å–ø–∏—Ä—Ç—ñ–Ω—ñ“£ —Ñ–æ—Ä–º—É–ª–∞—Å—ã?", ["CH3OH", "C2H5OH", "C3H7OH"], 1),
            ("–°–ø–∏—Ä—Ç—Ç–µ—Ä–¥—ñ“£ –¥–µ–≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—è—Å—ã–Ω–∞–Ω –Ω–µ —Ç“Ø–∑—ñ–ª–µ–¥—ñ?", ["–ê–ª–∫–∞–Ω", "–ê–ª–∫–µ–Ω", "–ê–ª–∫–∏–Ω"], 1)
        ]
    }
}

# “ö–∞–ª“ì–∞–Ω —Å–∞–±–∞“õ—Ç–∞—Ä–¥—ã (2-10, 12-21, 23-34) —Ü–∏–∫–ª–º–µ–Ω –±–æ—Å –∫“Ø–π—ñ–Ω–¥–µ —Ç–æ–ª—Ç—ã—Ä—É
for i in range(1, 35):
    if i not in lesson_data:
        lesson_data[i] = {
            "topic": f"{i}-—Å–∞–±–∞“õ: –ñ–∞–ª–ø—ã —à–æ–ª—É",
            "theory": f"–ë“±–ª {i}-—Å–∞–±–∞“õ—Ç—ã“£ —Ç–µ–æ—Ä–∏—è–ª—ã“õ –º–∞—Ç–µ—Ä–∏–∞–ª—ã. –ö–æ–Ω—Ç–µ–Ω—Ç –¥–∞–π—ã–Ω–¥–∞–ª—É–¥–∞.",
            "lab": ("–†–µ–∞–∫—Ç–∏–≤—Ç–µ—Ä", "–ù”ô—Ç–∏–∂–µ", "“ö–æ—Ä—ã—Ç—ã–Ω–¥—ã"),
            "color": "#D5DBDB",
            "test": [(f"–°“±—Ä–∞“õ {j}", ["–ê", "–ë", "–í"], 0) for j in range(1, 6)]
        }

# ---------------- SIDEBAR ----------------
st.sidebar.title("üìö 10-–°—ã–Ω—ã–ø –•–∏–º–∏—è")
st.sidebar.markdown("---")
lesson_num = st.sidebar.slider("–°–∞–±–∞“õ—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑", 1, 34, 1)

# ---------------- MAIN CONTENT ----------------
data = lesson_data[lesson_num]
st.title(f"üöÄ {data['topic']}")

tabs = st.tabs(["üìñ –¢–µ–æ—Ä–∏—è", "üî¨ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è", "‚úçÔ∏è –¢–µ—Å—Ç"])

with tabs[0]:
    st.header("–¢–µ–æ—Ä–∏—è–ª—ã“õ –±”©–ª—ñ–º")
    st.info(data['theory'])
    st.write("–ë“±–ª –±”©–ª—ñ–º–¥–µ —Ç–∞“õ—ã—Ä—ã–ø“õ–∞ “õ–∞—Ç—ã—Å—Ç—ã –Ω–µ–≥—ñ–∑–≥—ñ –∑–∞“£–¥—ã–ª—ã“õ—Ç–∞—Ä –º–µ–Ω —Ñ–æ—Ä–º—É–ª–∞–ª–∞—Ä –±–µ—Ä—ñ–ª–≥–µ–Ω.")

with tabs[1]:
    st.header("–í–∏—Ä—Ç—É–∞–ª–¥—ã —Ç”ô–∂—ñ—Ä–∏–±–µ")
    col1, col2 = st.columns(2)
    
    with col1:
        st.write(f"**–†–µ–∞–∫—Ç–∏–≤:** {data['lab'][0]}")
        st.write(f"**–ö“Ø—Ç—ñ–ª–µ—Ç—ñ–Ω –Ω”ô—Ç–∏–∂–µ:** {data['lab'][1]}")
        if st.button("–¢”ô–∂—ñ—Ä–∏–±–µ–Ω—ñ –±–∞—Å—Ç–∞—É"):
            with st.spinner('–†–µ–∞–∫—Ü–∏—è –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä...'):
                time.sleep(1.5)
                st.success("–†–µ–∞–∫—Ü–∏—è –∞—è“õ—Ç–∞–ª–¥—ã!")
                st.write(f"‚úÖ {data['lab'][2]}")

    with col2:
        # –ü—Ä–æ–±–∏—Ä–∫–∞ —Å–∏–º—É–ª—è—Ü–∏—è—Å—ã
        st.markdown(f"""
        <div style="width: 80px; height: 180px; border: 4px solid #333; border-radius: 0 0 40px 40px; background: #eee; position: relative; margin: auto;">
            <div style="width: 100%; height: 50%; background: {data['color']}; position: absolute; bottom: 0; border-radius: 0 0 36px 36px; transition: 2s;"></div>
        </div>
        <p style="text-align: center;">–ü—Ä–æ–±–∏—Ä–∫–∞ ‚Ññ1</p>
        """, unsafe_allow_html=True)

with tabs[2]:
    st.header("”®–∑ –±—ñ–ª—ñ–º—ñ“£–¥—ñ —Ç–µ–∫—Å–µ—Ä")
    score = 0
    for idx, (q, options, correct) in enumerate(data['test']):
        ans = st.radio(f"**{idx+1}. {q}**", options, key=f"ans_{lesson_num}_{idx}")
        if options.index(ans) == correct:
            score += 1
    
    if st.button("–ù”ô—Ç–∏–∂–µ–Ω—ñ –∂—ñ–±–µ—Ä—É"):
        if score == 5:
            st.balloons()
            st.success(f"–ö–µ—Ä–µ–º–µ—Ç! 5/5 “±–ø–∞–π!")
        elif score >= 3:
            st.warning(f"–ñ–∞“õ—Å—ã! {score}/5 “±–ø–∞–π. “ö–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä—ñ“£—ñ–∑.")
        else:
            st.error(f"–ù–∞—à–∞—Ä. {score}/5 “±–ø–∞–π. –¢–µ–æ—Ä–∏—è–Ω—ã “õ–∞–π—Ç–∞ –æ“õ—ã“£—ã–∑.")

st.sidebar.markdown("---")
st.sidebar.write(f"“ö–∞–∑—ñ—Ä–≥—ñ —Å–∞–±–∞“õ: {lesson_num}/34")
