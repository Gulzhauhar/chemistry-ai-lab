# streamlit_chemistry_34_full.py
import streamlit as st
import time

st.set_page_config(page_title="–û—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–ø—Ç–∞—Ä–¥—ã“£ —Å–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ü–∏—è–ª–∞—Ä—ã", layout="wide")

# ---------------- SIDEBAR ----------------
st.sidebar.title("üìò 34 –°–ê–ë–ê“ö")
lessons = [f"{i}-—Å–∞–±–∞“õ" for i in range(1, 35)]
lesson_selected = st.sidebar.selectbox("–°–∞–±–∞“õ—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑", lessons)
st.sidebar.markdown("---")
mode = st.sidebar.radio("–†–µ–∂–∏–º", ["–û“õ—É—à—ã", "–ú“±“ì–∞–ª—ñ–º"])

st.title("üß™ –û—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–ø—Ç–∞—Ä–¥—ã“£ —Å–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ü–∏—è–ª–∞—Ä—ã")
st.caption(f"–¢–∞“£–¥–∞–ª“ì–∞–Ω: {lesson_selected} | –†–µ–∂–∏–º: {mode}")

# ---------------- DATA (–¢“Ø—Å—Ç–µ—Ä –º–µ–Ω 3-—Å–∞–±–∞“õ –ª–æ–≥–∏–∫–∞—Å—ã “õ–æ—Å—ã–ª–¥—ã) ----------------
lesson_data = {
    1: {"topic": "–°–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ü–∏—è “±“ì—ã–º—ã",
        "theory": "–°–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ü–∏—è ‚Äì —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–ø—Ç—ã —Ä–µ–∞–∫—Ü–∏—è –±–µ–ª–≥—ñ—Å—ñ –∞—Ä“õ—ã–ª—ã –∞–Ω—ã“õ—Ç–∞—É ”ô–¥—ñ—Å—ñ.",
        "lab": ("Br‚ÇÇ (–ë—Ä–æ–º —Å—É—ã)", "–¢“Ø—Å “õ—ã–∑—ã–ª-“õ–æ“£—ã—Ä–¥–∞–Ω —Ç“Ø—Å—Å—ñ–∑–≥–µ ”©–∑–≥–µ—Ä–µ–¥—ñ", "–ê–ª–∫–µ–Ω (“õ–∞–Ω—ã“õ–ø–∞“ì–∞–Ω –±–∞–π–ª–∞–Ω—ã—Å) –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω –∫”©—Ä—Å–µ—Ç–µ–¥—ñ"),
        "colors": ["#A52A2A", "rgba(255,255,255,0.3)"], # “ö–æ“£—ã—Ä -> –¢“Ø—Å—Å—ñ–∑
        "ai": "–ë–µ—Ä—ñ–ª–≥–µ–Ω “õ–æ—Å—ã–ª—ã—Å—Ç—ã“£ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–±—ã–Ω AI –∞—Ä“õ—ã–ª—ã –±–æ–ª–∂–∞",
        "test": [
            ("Br‚ÇÇ –Ω–µ–Ω—ñ –∞–Ω—ã“õ—Ç–∞–π–¥—ã?", ["–ê–ª–∫–∞–Ω", "–ê–ª–∫–µ–Ω", "–°–ø–∏—Ä—Ç"], 1),
            ("–°–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ü–∏—è –º–∞“õ—Å–∞—Ç—ã?", ["–ë–µ–ª–≥—ñ", "–ë–∞“ì–∞", "–ò—ñ—Å"], 0),
            ("“ö–∞–π “õ–æ—Å—ã–ª—ã—Å “õ–æ—Å –±–∞–π–ª–∞–Ω—ã—Å“õ–∞ –∏–µ?", ["CH‚ÇÑ", "C‚ÇÇH‚ÇÑ", "C‚ÇÇH‚ÇÜ"], 1),
            ("Br‚ÇÇ —Ä–µ–∞–∫—Ü–∏—è—Å—ã “õ–∞–ª–∞–π –∂“Ø—Ä–µ–¥—ñ?", ["–¢“Ø—Å—Å—ñ–∑–¥–µ–Ω—É", "“ö—ã–∑–∞—Ä—É", "–ö”©–∫ —Ç“Ø—Å–∫–µ ”©–∑–≥–µ—Ä—É"], 0),
            ("“ö–æ—Å –±–∞–π–ª–∞–Ω—ã—Å –±–µ–ª–≥—ñ—Å—ñ?", ["Br‚ÇÇ", "KMnO‚ÇÑ", "NaOH"], 0),
            ("–ê–ª–∫–µ–Ω–¥–µ—Ä–¥—ñ“£ —Ä–µ–∞–∫—Ü–∏—è—Å—ã?", ["“ö–∞–Ω—ã“õ–ø–∞“ì–∞–Ω–¥—ã“õ", "–°—ñ–ª—Ç—ñ–ª—ñ–∫", "“ö—ã—à“õ—ã–ª–¥—ã“õ"], 0),
            ("–¢“Ø—Å—Å—ñ–∑–¥–µ–Ω—É –±–∞–π“õ–∞–ª–∞–¥—ã –º–∞?", ["–ò”ô", "–ñ–æ“õ", "–¢–µ–∫ “õ—ã—à“õ—ã–ª–¥–∞"], 0),
            ("–°–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ü–∏—è —Ç“Ø—Ä—ñ?", ["–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–ø—Ç—ã –∞–Ω—ã“õ—Ç–∞—É", "–ë–∞“ì–∞–ª–∞—É", "–¢–∞–ª–¥–∞—É"], 0),
            ("“ö–∞–π —Ä–µ–∞–∫—Ç–∏–≤ “õ–æ–ª–¥–∞–Ω—ã–ª–¥—ã?", ["Br‚ÇÇ", "HCl", "CuSO‚ÇÑ"], 0),
            ("“ö–∞–π “õ–æ—Å—ã–ª—ã—Å —Ä–µ–∞–∫—Ü–∏—è“ì–∞ —Ç“Ø—Å—Å—ñ–∑–¥–µ–Ω–¥—ñ?", ["C‚ÇÇH‚ÇÑ", "CH‚ÇÑ", "C‚ÇÇH‚ÇÜ"], 0)
        ]
    },
    2: {"topic": "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–ø—Ç–∞—Ä",
        "theory": "–û—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ “õ–æ—Å—ã–ª—ã—Å—Ç–∞—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–ø—Ç–∞—Ä –∞—Ä“õ—ã–ª—ã –∂—ñ–∫—Ç–µ–ª–µ–¥—ñ.",
        "lab": ("Cu(OH)‚ÇÇ (–ú—ã—Å –≥–∏–¥—Ä–æ–∫—Å–∏–¥—ñ)", "–ö”©–∫ —Ç“Ø—Å–∫–µ –±–æ—è–ª–∞–¥—ã", "–°–ø–∏—Ä—Ç –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω –∫”©—Ä—Å–µ—Ç–µ–¥—ñ"),
        "colors": ["#0000FF", "#8A2BE2"], # –ö”©–∫ -> –ö“Ø–ª–≥—ñ–Ω
        "ai": "–ë–µ—Ä—ñ–ª–≥–µ–Ω —Ñ–æ—Ä–º—É–ª–∞–¥–∞–Ω —Ç–æ–ø—Ç—ã –∞–Ω—ã“õ—Ç–∞",
        "test": [
            ("‚ÄìOH “õ–∞–π —Ç–æ–ø?", ["–ê–º–∏–Ω", "–°–ø–∏—Ä—Ç", "“ö—ã—à“õ—ã–ª"], 1),
            ("–°–ø–∏—Ä—Ç—Ç—ñ“£ –±–µ–ª–≥—ñ—Å—ñ?", ["Cu(OH)‚ÇÇ", "Br‚ÇÇ", "KMnO‚ÇÑ"], 0),
            ("–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–ø –Ω–µ “Ø—à—ñ–Ω –∫–µ—Ä–µ–∫?", ["–ñ—ñ–∫—Ç–µ—É", "–¢“Ø—Å", "–ò—ñ—Å"], 0),
            ("–ö”©–±—ñ–Ω–µ “õ–∞–Ω–¥–∞–π —Ä–µ–∞–∫—Ü–∏—è?", ["–°–∞–ø–∞–ª—ã“õ", "–°–∞–Ω–¥—ã“õ", "–¢–µ–æ—Ä–∏—è–ª—ã“õ"], 0),
            ("‚ÄìCOOH “õ–∞–π —Ç–æ–ø?", ["–°–ø–∏—Ä—Ç", "“ö—ã—à“õ—ã–ª", "–ê–º–∏–Ω"], 1),
            ("‚ÄìNH‚ÇÇ “õ–∞–π —Ç–æ–ø?", ["–ê–º–∏–Ω", "“ö—ã—à“õ—ã–ª", "–°–ø–∏—Ä—Ç"], 0),
            ("‚ÄìCHO “õ–∞–π —Ç–æ–ø?", ["–ê–ª—å–¥–µ–≥–∏–¥", "–ö–µ—Ç–æ–Ω", "–°–ø–∏—Ä—Ç"], 0),
            ("–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–ø “õ–∞–Ω–¥–∞–π?", ["‚ÄìOH", "‚ÄìCH‚ÇÉ", "‚ÄìH"], 0),
            ("–°–∞–ø–∞–ª—ã“õ —Ä–µ–∞–∫—Ü–∏—è–Ω—ã –Ω–µ “Ø—à—ñ–Ω “õ–æ–ª–¥–∞–Ω–∞–º—ã–∑?", ["–ë–µ–ª–≥—ñ", "–ò—ñ—Å", "–¢“Ø—Å"], 0),
            ("–¢–æ–ø—Ç—ã –∞–Ω—ã“õ—Ç–∞—É–¥—ã“£ —Ä–µ–∞–∫—Ç–∏–≤—ñ?", ["Cu(OH)‚ÇÇ", "Br‚ÇÇ", "HCl"], 0)
        ]
    },
    3: {"topic": "“ö–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫ –µ—Ä–µ–∂–µ–ª–µ—Ä—ñ",
        "theory": "–ó–µ—Ä—Ç—Ö–∞–Ω–∞–¥–∞ “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫ —Å–∞“õ—Ç–∞—É –º—ñ–Ω–¥–µ—Ç—Ç—ñ. –†–µ–∞–∫—Ç–∏–≤—Ç–µ—Ä–º–µ–Ω –∂“±–º—ã—Å –∫–µ–∑—ñ–Ω–¥–µ “õ–æ—Ä“ì–∞–Ω—ã—Å “õ“±—Ä–∞–ª–¥–∞—Ä—ã–Ω –ø–∞–π–¥–∞–ª–∞–Ω—ã“£—ã–∑.",
        "lab": ("“ö–æ—Ä“ì–∞–Ω—ã—à –∫”©–∑—ñ–ª–¥—ñ—Ä—ñ–≥—ñ, “õ–æ–ª“ì–∞–ø, —Ö–∞–ª–∞—Ç", "–ë–∞—Ä–ª—ã“õ “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫ “õ“±—Ä–∞–ª–¥–∞—Ä—ã –∫–∏—ñ–ª–¥—ñ", "“ö–∞—É—ñ–ø—Å—ñ–∑ –∂“±–º—ã—Å –æ—Ä—Ç–∞—Å—ã –¥–∞–π—ã–Ω"),
        "colors": ["#E0E0E0", "#32CD32"], # –°“±—Ä -> –ñ–∞—Å—ã–ª
        "ai": "“ö–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫ –±“±–∑—ã–ª“ì–∞–Ω –∂–∞“ì–¥–∞–π–¥–∞ —Ä–µ–∞–∫—Ü–∏—è “õ–∞–ª–∞–π ”©–∑–≥–µ—Ä–µ–¥—ñ?",
        "test": [
            ("“ö–æ—Ä“ì–∞–Ω—ã—à –∫”©–∑—ñ–ª–¥—ñ—Ä—ñ–≥—ñ –Ω–µ “Ø—à—ñ–Ω “õ–∞–∂–µ—Ç?", ["–°”ô–Ω “Ø—à—ñ–Ω", "–ö”©–∑–¥—ñ “õ–æ—Ä“ì–∞—É “Ø—à—ñ–Ω", "–¢“Ø—Å “Ø—à—ñ–Ω"], 1),
            ("“ö–æ–ª“ì–∞–ø—Ç—ã –Ω–µ “Ø—à—ñ–Ω –∫–∏—é –∫–µ—Ä–µ–∫?", ["“ö–æ–ª–¥—ã “õ–æ—Ä“ì–∞—É", "–°”ô–Ω “Ø—à—ñ–Ω", "–ñ–∞–π —ã“£“ì–∞–π–ª—ã"], 0),
            ("–ó–µ—Ä—Ç—Ö–∞–Ω–∞ —Ö–∞–ª–∞—Ç—ã?", ["–°”ô–Ω", "“ö–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫", "–ñ–∞–π –∫–∏—ñ–º"], 1),
            ("“ö–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫—Å—ñ–∑ —Ä–µ–∞–∫—Ü–∏—è “õ–∞–ª–∞–π –±–æ–ª–∞–¥—ã?", ["“ö–∞—É—ñ–ø—Ç—ñ", "“ö–∞—É—ñ–ø—Å—ñ–∑", "–ñ–∞–π"], 0),
            ("Br‚ÇÇ-–º–µ–Ω –∂“±–º—ã—Å –∫–µ–∑—ñ–Ω–¥–µ –Ω–µ –∫–∏—é –∫–µ—Ä–µ–∫?", ["–ö”©–∑—ñ–ª–¥—ñ—Ä—ñ–∫", "–ï—à—Ç–µ“£–µ", "“ö–æ–ª“ì–∞–ø"], 0),
            ("KMnO‚ÇÑ —à–∞—à“õ–∞ —Ç–∏—ñ–ø –∫–µ—Ç—Å–µ?", ["–ñ–æ“õ", "–ñ–∞–Ω–∞—Å—Å–∞ –∫“Ø–π—ñ–∫"], 1),
            ("“ö–æ—Ä—à–∞“ì–∞–Ω –æ—Ä—Ç–∞ “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–≥—ñ?", ["–ë–∞—Ä", "–ñ–æ“õ", "–¢–µ–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç"], 0),
            ("“ö–æ–ª–¥–∞–Ω—ã–ª“ì–∞–Ω —Ä–µ–∞–∫—Ç–∏–≤—Ç—ñ “õ–∞–ª–∞–π —Å–∞“õ—Ç–∞—É –∫–µ—Ä–µ–∫?", ["–¢“±–∑–¥—ã“õ—Ç–∞", "–ë–µ–ª–≥—ñ–ª–µ—É –º–µ–Ω “õ–∞–ø—Ç–∞—É", "–¢–µ–∫ “õ–æ–π"], 1),
            ("–°—ñ–ª—Ç—ñ–ª—ñ–∫ –µ—Ä—ñ—Ç—ñ–Ω–¥—ñ–º–µ–Ω –∂“±–º—ã—Å –∫–µ–∑—ñ–Ω–¥–µ?", ["“ö–æ–ª“ì–∞–ø –∫–µ—Ä–µ–∫", "–ñ–æ“õ", "–¢–µ–∫ –∫”©–∑—ñ–ª–¥—ñ—Ä—ñ–∫"], 0),
            ("–¢”©—Ç–µ–Ω—à–µ –∂–∞“ì–¥–∞–π–¥–∞?", ["–ê–ø–∞—Ç —Å–∏–≥–Ω–∞–ª—ã–Ω –±–µ—Ä—É", "–ñ–∞–π “õ–∞—Ä–∞–ø –æ—Ç—ã—Ä—É", "–°—ã–Ω–∞—É"], 0)
        ]
    },
    4: {"topic": "“ö–∞–Ω—ã“õ–ø–∞“ì–∞–Ω –±–∞–π–ª–∞–Ω—ã—Å",
        "theory": "C=C –∂”ô–Ω–µ C‚â°C –±–∞–π–ª–∞–Ω—ã—Å—Ç–∞—Ä—ã —Ä–µ–∞–∫—Ü–∏—è“ì–∞ –æ“£–∞–π —Ç“Ø—Å–µ–¥—ñ.",
        "lab": ("KMnO‚ÇÑ (–ö–∞–ª–∏–π –ø–µ—Ä–º–∞–Ω–≥–∞–Ω–∞—Ç—ã)", "–ö“Ø–ª–≥—ñ–Ω —Ç“Ø—Å—Ç—ñ“£ —Ç“Ø—Å—Å—ñ–∑–¥–µ–Ω—É—ñ –±–∞–π“õ–∞–ª–∞–¥—ã", "“ö–∞–Ω—ã“õ–ø–∞“ì–∞–Ω –±–∞–π–ª–∞–Ω—ã—Å –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω –∫”©—Ä—Å–µ—Ç–µ–¥—ñ"),
        "colors": ["#8B008B", "rgba(255,255,255,0.2)"], # –ö“Ø–ª–≥—ñ–Ω -> –¢“Ø—Å—Å—ñ–∑
        "ai": "–ù–µ–ª—ñ–∫—Ç–µ–Ω “õ–∞–Ω—ã“õ–ø–∞“ì–∞–Ω –±–∞–π–ª–∞–Ω—ã—Å—Ç–∞—Ä —Ä–µ–∞–∫—Ü–∏—è“ì–∞ —Ç–µ–∑ —Ç“Ø—Å–µ–¥—ñ?",
        "test": [
            ("“ö–∞–Ω—ã“õ–ø–∞“ì–∞–Ω –±–∞–π–ª–∞–Ω—ã—Å?", ["C‚ÄìC", "C=C", "C‚â°C"], 1),
            ("C‚â°C “õ–∞–ª–∞–π –∞–Ω—ã“õ—Ç–∞–ª–∞–¥—ã?", ["Br‚ÇÇ —Ç“Ø—Å—Å—ñ–∑–¥–µ–Ω—É", "Cu(OH)‚ÇÇ –∫”©–∫", "NaHCO‚ÇÉ –∫”©–ø—ñ—Ä—à—ñ–∫"], 0),
            ("–ê–ª–∫–µ–Ω —Ä–µ–∞–∫—Ü–∏—è—Å—ã–Ω–∞ Br‚ÇÇ “õ–æ—Å—É:", ["–¢“Ø—Å—Å—ñ–∑–¥–µ–Ω—É", "–ö“Ø–ª–≥—ñ–Ω", "“ö—ã–∑—ã–ª"], 0),
            ("KMnO‚ÇÑ “õ–æ—Å“õ–∞–Ω–¥–∞?", ["–ö“Ø–ª–≥—ñ–Ω –∂–æ–π—ã–ª–∞–¥—ã", "“ö—ã–∑—ã–ª", "–ö”©–∫"], 0),
            ("“ö–∞–Ω—ã“õ–ø–∞“ì–∞–Ω–¥—ã“õ –±–µ–ª–≥—ñ—Å—ñ?", ["–¢“Ø—Å ”©–∑–≥–µ—Ä—É", "–ì–∞–∑ –±”©–ª—ñ–Ω—É", "–¢“±–Ω–±–∞"], 0),
            ("“ö–∞–π —Ç–æ–ø“õ–∞ –∂–∞—Ç–∞–¥—ã?", ["–ê–ª–∫–∞–Ω", "–ê–ª–∫–µ–Ω", "–°–ø–∏—Ä—Ç"], 1),
            ("–¢–µ–∫—Å–µ—Ä—É ”ô–¥—ñ—Å—ñ?", ["–°–∞–ø–∞–ª—ã“õ", "–°–∞–Ω–¥—ã“õ", "–¢–µ–æ—Ä–∏—è–ª—ã“õ"], 0),
            ("–†–µ–∞–∫—Ü–∏—è —É–∞“õ—ã—Ç—ã–Ω–¥–∞?", ["–ñ—ã–ª–¥–∞–º", "–ë–∞—è—É", "–¢–µ–∫ “õ—ã–∑–¥—ã—Ä“ì–∞–Ω–¥–∞"], 0),
            ("“ö–æ—Å –±–∞–π–ª–∞–Ω—ã—Å —Ç“Ø—Ä—ñ?", ["C=C, C‚â°C", "C‚ÄìC", "‚ÄìOH"], 0),
            ("–°–∞–ø–∞–ª—ã“õ ”ô–¥—ñ—Å –Ω–µ “Ø—à—ñ–Ω?", ["–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ç–æ–ø—Ç—ã –∞–Ω—ã“õ—Ç–∞—É", "–ë–∞“ì–∞–ª–∞—É", "–¢–∞–ª–¥–∞—É"], 0)
        ]
    }
}

# ---------------- UI BLOCKS ----------------
def show_theory(text):
    st.subheader("üìñ –¢–µ–æ—Ä–∏—è")
    st.info(text)

def show_lab(reagents, observation, conclusion, colors):
    st.subheader("üî¨ –ó–µ—Ä—Ç—Ö–∞–Ω–∞–ª—ã“õ –∂“±–º—ã—Å")
    
    # CSS –ê–Ω–∏–º–∞—Ü–∏—è—Å—ã
    st.markdown(f"""
    <style>
    .test-tube-container {{ display: flex; justify-content: center; padding: 20px; }}
    .test-tube {{
        width: 55px; height: 180px; border: 4px solid #F0F2F6;
        border-bottom-left-radius: 28px; border-bottom-right-radius: 28px;
        position: relative; overflow: hidden; background: rgba(255,255,255,0.1);
    }}
    .liquid {{
        position: absolute; bottom: 0; width: 100%; height: 0%;
        transition: height 1.5s ease-in-out, background-color 2s ease;
    }}
    </style>
    """, unsafe_allow_html=True)

    col1, col2 = st.columns([1, 2])
    
    with col1:
        tube_placeholder = st.empty()
        tube_placeholder.markdown('<div class="test-tube-container"><div class="test-tube"><div class="liquid"></div></div></div>', unsafe_allow_html=True)

    with col2:
        st.write(f"**–†–µ–∞–∫—Ç–∏–≤—Ç–µ—Ä:** {reagents}")
        if st.button("üß™ –†–µ–∞–∫—Ü–∏—è–Ω—ã –±–∞—Å—Ç–∞—É"):
            progress_bar = st.progress(0)
            status = st.empty()
            
            for i in range(1, 101):
                time.sleep(0.02)
                progress_bar.progress(i)
                
                if i < 40:
                    status.info("–†–µ–∞–∫—Ç–∏–≤ “õ–æ—Å—ã–ª—É–¥–∞...")
                    tube_placeholder.markdown(f'<div class="test-tube-container"><div class="test-tube"><div class="liquid" style="height: 50%; background-color: {colors[0]};"></div></div></div>', unsafe_allow_html=True)
                elif i < 80:
                    status.warning(f"–ë–∞“õ—ã–ª–∞—É: {observation}")
                    tube_placeholder.markdown(f'<div class="test-tube-container"><div class="test-tube"><div class="liquid" style="height: 70%; background-color: {colors[1]};"></div></div></div>', unsafe_allow_html=True)
                else:
                    status.success(f"“ö–æ—Ä—ã—Ç—ã–Ω–¥—ã: {conclusion}")
                    tube_placeholder.markdown(f'<div class="test-tube-container"><div class="test-tube"><div class="liquid" style="height: 85%; background-color: {colors[1]};"></div></div></div>', unsafe_allow_html=True)

def show_ai(task):
    st.subheader("ü§ñ AI-—Å–∏–º—É–ª—è—Ü–∏—è —Ç–∞–ø—Å—ã—Ä–º–∞—Å—ã")
    st.text_area("AI –∂–∞—É–∞–±—ã / –æ–π—ã“£–¥—ã –∂–∞–∑", key=f"ai_{lesson_selected}")
    if st.button("AI-–¥–∞–Ω “Ø–ª–≥—ñ –∂–∞—É–∞–ø"):
        st.success(task)

def show_test(test_items):
    st.subheader("üìù –¢–µ—Å—Ç")
    score = 0
    for idx, (q, opts, correct) in enumerate(test_items):
        ans = st.radio(f"{idx+1}. {q}", opts, key=f"q{idx}_{lesson_selected}")
        if ans and opts.index(ans) == correct:
            score += 1
    st.write(f"‚úÖ “∞–ø–∞–π: {score} / {len(test_items)}")

# ---------------- CONTENT LOGIC ----------------
# –¢–∞“£–¥–∞–ª“ì–∞–Ω —Å–∞–±–∞“õ –Ω”©–º—ñ—Ä—ñ–Ω —Å–∞–Ω“ì–∞ –∞–π–Ω–∞–ª–¥—ã—Ä—É
try:
    lesson_id = int(lesson_selected.split("-")[0])
except:
    lesson_id = 1

data = lesson_data.get(lesson_id)

if data:
    st.header(f"{lesson_id}-—Å–∞–±–∞“õ. {data['topic']}")
    show_theory(data["theory"])
    
    # –¢“Ø—Å—Ç–µ—Ä–¥—ñ –∞–ª—É (–µ–≥–µ—Ä –∂–æ“õ –±–æ–ª—Å–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—Ç—ã —Ç“Ø—Å)
    current_colors = data.get("colors", ["#3498db", "#e74c3c"])
    show_lab(data["lab"][0], data["lab"][1], data["lab"][2], current_colors)
    
    show_ai(data["ai"])
    show_test(data["test"])
else:
    st.warning("–ë“±–ª —Å–∞–±–∞“õ“õ–∞ –∫–æ–Ω—Ç–µ–Ω—Ç –∫–µ–∑–µ“£-–∫–µ–∑–µ“£—ñ–º–µ–Ω “õ–æ—Å—ã–ª–∞–¥—ã")

st.markdown("---")
st.caption("¬© Chemistry + AI | Streamlit –æ“õ—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Å—ã")
